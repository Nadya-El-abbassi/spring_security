

# ğŸ“Œ TP Spring Boot 

Ce projet consiste Ã  dÃ©velopper une application web Spring Boot permettant de **gÃ©rer une liste de produits** avec une interface Thymeleaf, une couche DAO basÃ©e sur Spring Data, la validation des formulaires et une sÃ©curitÃ© personnalisÃ©e.

---
<img src="images/img.png">

## ğŸ 1. CrÃ©ation du projet Spring Boot

CrÃ©er un projet Spring Boot avec les dÃ©pendances suivantes :

* **Spring Web**
* **Spring Data JPA**
* **H2 Database**
* **MySQL Driver**
* **Thymeleaf**
* **Lombok**
* **Spring Security**
* **Spring Validation**

<img src="images/img_1.png">

## ğŸ—‚ï¸ 2. CrÃ©er l'entitÃ© JPA `Product`

CrÃ©er une classe `Product` annotÃ©e avec :
<img src="images/img_2.png">

---

## ğŸ§  3. CrÃ©er lâ€™interface `ProductRepository`

* Interface qui **hÃ©rite** de `JpaRepository<Product, Long>`
* Permet dâ€™effectuer des opÃ©rations CRUD sans implÃ©mentation manuelle

<img src="images/img_3.png">

## ğŸ§ª 4. Tester la couche DAO

Dans `CommandLineRunner`, insÃ©rer quelques produits :
<img src="images/img_5.png">
Puis afficher les donnÃ©es dans la console pour vÃ©rifier le fonctionnement :

```java
productRepository.findAll().forEach(System.out::println);
```

---
<img src="images/img_6.png">

## ğŸ”“ 5. DÃ©sactiver la protection par dÃ©faut de Spring Security
<img src="images/img_4.png">

CrÃ©er une classe de configuration :

```java
@Configuration
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http.formLogin().disable()
            .authorizeHttpRequests(auth -> auth.anyRequest().permitAll());
        return http.build();
    }
}
```

---

## ğŸ–¥ï¸ 6. Spring MVC + Thymeleaf

CrÃ©er un contrÃ´leur MVC (`ProductController`) et les vues Thymeleaf.

### ğŸ”¹ Afficher la liste des produits

* Page : `products.html`
* RÃ©cupÃ©ration via `productRepository.findAll()`

### ğŸ”¹ Supprimer un produit

* URL : `/delete/{id}`
* Redirection vers la liste

### ğŸ”¹ Template Thymeleaf + Bootstrap

CrÃ©er un layout global :
`templates/layout.html` avec `th:fragment`

Puis faire hÃ©riter dâ€™autres pages via `th:replace`.

### ğŸ”¹ Ajouter un produit + Validation

* Formulaire HTML utilisant `${product}`
* Annotation Spring Validation :
  `@Valid`, `BindingResult`
* Message dâ€™erreur via `th:errors`

---

## ğŸ” 7. SÃ©curiser lâ€™application

Activer Spring Security avec :

* Formulaire dâ€™authentification
* Comptes utilisateurs en mÃ©moire
* Restrictions dâ€™accÃ¨s (ex. : suppression rÃ©servÃ©e Ã  ADMIN)

Exemple :

```java
.authorizeHttpRequests(ar->ar.requestMatchers("/user/**").hasRole("USER"))
        .authorizeHttpRequests(ar->ar.requestMatchers("/admin/**").hasRole("ADMIN"))
```

